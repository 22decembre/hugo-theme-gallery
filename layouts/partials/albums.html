{{ $albums := slice }}
{{ if .IsHome }}
  {{ $albums = $albums | append (where site.Pages.ByDate.Reverse "Params.featured" "=" true) }}
{{ end }}
{{ $albums = $albums | append (where .Pages.ByDate.Reverse "Params.private" "ne" true) }}


<div class="mx-auto mb-16 mt-8 grid max-w-screen-2xl grid-cols-1 gap-x-6 gap-y-8 px-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
  {{ range $albums | uniq }}
    {{ $gallery := partial "get-gallery.html" . }}
    {{ with $gallery }}
      <a class="card" href="{{ .page.RelPermalink }}" title="{{ .page.Title }}">
        <img loading="lazy" width="{{ .thumbnail.Width }}" height="{{ .thumbnail.Height }}" src="{{ .thumbnail.RelPermalink }}" style="background-color: {{ .color }}" alt="{{ .page.Title }}" />
        <div class="card-body">
          <h2>{{ .page.Title }}</h2>
          <p>
            {{ i18n "photoCount" (.imageCount | lang.FormatNumber 0) }}
            {{ if gt .albumCount 0 }}{{ i18n "in" }} {{ i18n "albumCount" (.albumCount | lang.FormatNumber 0) }}{{ end }}
          </p>
        </div>
      </a>
    {{ end }}
  {{ end }}
</div>
